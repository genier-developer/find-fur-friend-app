import{b as e,p as D,t as F,j as s,v as k,w as O,x as T}from"./index-BvowqXEV.js";import{H as V,e as A,C as B,I as M,f as L}from"./header-CE_8xDEo.js";import{I as z,V as H,a as R}from"./VisibilityOff-CyQcx_uc.js";import{M as N}from"./Modal-DO7UOxld.js";import{T as t}from"./Typography-DtBlHvOa.js";import{F as p,h as u,O as x}from"./OutlinedInput-IGWuFpSe.js";import{L as U}from"./Link-DQ4rFCZ8.js";const X=()=>{const[o,g]=e.useState(""),[n,w]=e.useState(""),[j,r]=e.useState(!0),[i,f]=e.useState(!1),[l,b]=e.useState(null),d=D(),v=F(),c=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o),y=c&&n.length>=6,I=async a=>{a.preventDefault();try{const h=(await k(O,o,n)).user;v(T({uid:h.uid,email:h.email})),r(!1),d("/")}catch(m){b("Invalid email or password. Please try again."),console.log(m)}},S=()=>{r(!1),d("/")},C=()=>f(a=>!a),P=a=>{a.preventDefault()},E={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:350,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2,textAlign:"center"};return s.jsxs(s.Fragment,{children:[s.jsx(V,{}),s.jsx(N,{open:j,onClose:S,children:s.jsx(A,{sx:E,children:s.jsxs("form",{onSubmit:I,children:[s.jsx(t,{variant:"h5",children:"Sign In"}),s.jsxs(B,{sx:{marginTop:2},children:[s.jsxs(p,{size:"small",sx:{m:1,width:"25ch"},variant:"outlined",children:[s.jsx(u,{htmlFor:"outlined-adornment-email",children:"Email"}),s.jsx(x,{id:"outlined-adornment-email",label:"Email",onChange:a=>g(a.target.value),type:"email"}),!c&&o&&s.jsx(t,{color:"error",variant:"caption",children:"Please enter a valid email."})]}),s.jsxs(p,{size:"small",sx:{m:1,width:"25ch"},variant:"outlined",children:[s.jsx(u,{htmlFor:"outlined-adornment-password",children:"Password"}),s.jsx(x,{id:"outlined-adornment-password",label:"Password",onChange:a=>w(a.target.value),type:i?"text":"password",endAdornment:s.jsx(z,{position:"end",children:s.jsx(M,{"aria-label":"toggle password visibility",onClick:C,onMouseDown:P,edge:"end",children:i?s.jsx(H,{}):s.jsx(R,{})})})}),n&&n.length<6&&s.jsx(t,{color:"error",variant:"caption",children:"Password must be at least 6 characters."})]}),l&&s.jsx(t,{color:"error",variant:"caption",sx:{display:"block",mt:1},children:l}),s.jsx(L,{sx:{marginTop:2},type:"submit",variant:"contained",disabled:!y,children:"Sign In"}),s.jsx(t,{sx:{marginBottom:1,marginTop:4},children:"Don't have an account?"}),s.jsx(U,{href:"/signup",children:"Create an account"})]})]})})})]})};export{X as default};
