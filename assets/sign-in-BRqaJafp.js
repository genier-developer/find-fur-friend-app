import{b as e,p as D,t as F,j as s,v as k,w as T,x as A}from"./index-CP7ra7sP.js";import{H as B,e as M,C as O,I as L,f as z}from"./header-Z3I3Q72U.js";import{I as H,d as R,a as V}from"./VisibilityOff-BZ-xHuwS.js";import{M as _}from"./Modal-B8V8J6-g.js";import{T as t}from"./Typography-DYkctF6B.js";import{F as h,h as p,O as u}from"./OutlinedInput-DqqeZ9Wk.js";import{L as $}from"./Link-I2dZPWt0.js";const Q=()=>{const[o,x]=e.useState(""),[n,g]=e.useState(""),[w,r]=e.useState(!0),[i,j]=e.useState(!1),[l,f]=e.useState(null),d=D(),v=F(),c=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o),b=c&&n.length>=6,I=async a=>{a.preventDefault();try{const E=(await k(T,o,n)).user;v(A(E)),r(!1),d("/")}catch(m){f("Invalid email or password. Please try again."),console.log(m)}},S=()=>{r(!1),d("/")},C=()=>j(a=>!a),y=a=>{a.preventDefault()},P={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:350,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2,textAlign:"center"};return s.jsxs(s.Fragment,{children:[s.jsx(B,{}),s.jsx(_,{open:w,onClose:S,children:s.jsx(M,{sx:P,children:s.jsxs("form",{onSubmit:I,children:[s.jsx(t,{variant:"h5",children:"Sign In"}),s.jsxs(O,{sx:{marginTop:2},children:[s.jsxs(h,{size:"small",sx:{m:1,width:"25ch"},variant:"outlined",children:[s.jsx(p,{htmlFor:"outlined-adornment-email",children:"Email"}),s.jsx(u,{id:"outlined-adornment-email",label:"Email",onChange:a=>x(a.target.value),type:"email"}),!c&&o&&s.jsx(t,{color:"error",variant:"caption",children:"Please enter a valid email."})]}),s.jsxs(h,{size:"small",sx:{m:1,width:"25ch"},variant:"outlined",children:[s.jsx(p,{htmlFor:"outlined-adornment-password",children:"Password"}),s.jsx(u,{id:"outlined-adornment-password",label:"Password",onChange:a=>g(a.target.value),type:i?"text":"password",endAdornment:s.jsx(H,{position:"end",children:s.jsx(L,{"aria-label":"toggle password visibility",onClick:C,onMouseDown:y,edge:"end",children:i?s.jsx(R,{}):s.jsx(V,{})})})}),n&&n.length<6&&s.jsx(t,{color:"error",variant:"caption",children:"Password must be at least 6 characters."})]}),l&&s.jsx(t,{color:"error",variant:"caption",sx:{display:"block",mt:1},children:l}),s.jsx(z,{sx:{marginTop:2},type:"submit",variant:"contained",disabled:!b,children:"Sign In"}),s.jsx(t,{sx:{marginBottom:1,marginTop:4},children:"Don't have an account?"}),s.jsx($,{href:"/signup",children:"Create an account"})]})]})})})]})};export{Q as default};
