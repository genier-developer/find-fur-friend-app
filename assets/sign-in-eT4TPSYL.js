import{b as e,p as D,t as F,j as s,v as k,w as T,x as A}from"./index-CiNqUqNm.js";import{H as B,e as M,C as O,I as L,f as z}from"./header-Bbx6THHk.js";import{I as H,d as R,a as V}from"./VisibilityOff-DMMQusHt.js";import{M as _}from"./Modal-DVma8aq3.js";import{T as t}from"./Typography-C_PTpFm6.js";import{F as h,h as p,O as x}from"./OutlinedInput-C0rXSh6U.js";import{L as $}from"./Link-CZhqvagX.js";const Q=()=>{const[o,g]=e.useState(""),[n,w]=e.useState(""),[j,r]=e.useState(!0),[i,f]=e.useState(!1),[l,v]=e.useState(null),d=D(),b=F(),c=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o),I=c&&n.length>=6,S=async a=>{a.preventDefault();try{const u=(await k(T,o,n)).user;b(A({uid:u.uid,email:u.email})),r(!1),d("/")}catch(m){v("Invalid email or password. Please try again."),console.log(m)}},C=()=>{r(!1),d("/")},y=()=>f(a=>!a),P=a=>{a.preventDefault()},E={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:350,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2,textAlign:"center"};return s.jsxs(s.Fragment,{children:[s.jsx(B,{}),s.jsx(_,{open:j,onClose:C,children:s.jsx(M,{sx:E,children:s.jsxs("form",{onSubmit:S,children:[s.jsx(t,{variant:"h5",children:"Sign In"}),s.jsxs(O,{sx:{marginTop:2},children:[s.jsxs(h,{size:"small",sx:{m:1,width:"25ch"},variant:"outlined",children:[s.jsx(p,{htmlFor:"outlined-adornment-email",children:"Email"}),s.jsx(x,{id:"outlined-adornment-email",label:"Email",onChange:a=>g(a.target.value),type:"email"}),!c&&o&&s.jsx(t,{color:"error",variant:"caption",children:"Please enter a valid email."})]}),s.jsxs(h,{size:"small",sx:{m:1,width:"25ch"},variant:"outlined",children:[s.jsx(p,{htmlFor:"outlined-adornment-password",children:"Password"}),s.jsx(x,{id:"outlined-adornment-password",label:"Password",onChange:a=>w(a.target.value),type:i?"text":"password",endAdornment:s.jsx(H,{position:"end",children:s.jsx(L,{"aria-label":"toggle password visibility",onClick:y,onMouseDown:P,edge:"end",children:i?s.jsx(R,{}):s.jsx(V,{})})})}),n&&n.length<6&&s.jsx(t,{color:"error",variant:"caption",children:"Password must be at least 6 characters."})]}),l&&s.jsx(t,{color:"error",variant:"caption",sx:{display:"block",mt:1},children:l}),s.jsx(z,{sx:{marginTop:2},type:"submit",variant:"contained",disabled:!I,children:"Sign In"}),s.jsx(t,{sx:{marginBottom:1,marginTop:4},children:"Don't have an account?"}),s.jsx($,{href:"/signup",children:"Create an account"})]})]})})})]})};export{Q as default};
